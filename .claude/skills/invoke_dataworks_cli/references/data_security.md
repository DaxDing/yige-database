# DataWorks 数据安全

## 概述

DataWorks 提供多层次的数据安全保护机制，包括权限管理、数据脱敏、数据加密等功能。

## 权限管理

### 权限模型

```
工作空间
├── 空间管理员（Owner）
├── 开发角色
│   ├── 开发（仅开发环境）
│   └── 运维（生产环境运维）
├── 访客角色
│   └── 访客（只读）
└── 自定义角色
```

### 角色权限

| 角色 | 数据开发 | 数据发布 | 生产运维 | 数据查询 |
|------|---------|---------|---------|---------|
| 空间管理员 | ✅ | ✅ | ✅ | ✅ |
| 开发 | ✅ | ✅ | ❌ | ✅ |
| 运维 | ❌ | ❌ | ✅ | ✅ |
| 访客 | ❌ | ❌ | ❌ | ✅ |

### 成员管理

**路径**：工作空间管理 → 成员管理

操作：
- 添加成员
- 分配角色
- 设置权限有效期

## 数据脱敏

### 脱敏规则

| 脱敏类型 | 说明 | 示例 |
|---------|------|------|
| **遮盖脱敏** | 部分字符替换为 * | `138****1234` |
| **哈希脱敏** | 哈希处理 | `a1b2c3d4...` |
| **截断脱敏** | 保留部分 | `张*` |
| **日期脱敏** | 日期模糊 | `2026-01-**` |
| **空值脱敏** | 置为空 | `NULL` |

### 配置脱敏

**路径**：数据安全 → 脱敏规则 → 新建规则

配置：
1. 选择脱敏对象（表/字段）
2. 选择脱敏方式
3. 配置脱敏参数
4. 设置生效范围

### 敏感字段识别

DataWorks 自动识别敏感字段：

| 字段类型 | 识别规则 |
|---------|---------|
| 手机号 | 11 位数字，1 开头 |
| 身份证 | 18 位，符合校验规则 |
| 银行卡 | 16-19 位数字 |
| 邮箱 | 包含 @ 符号 |
| 姓名 | 2-4 个中文字符 |

## 数据加密

### 存储加密

| 加密对象 | 方式 |
|---------|------|
| 凭证密码 | AES 加密存储 |
| 数据源密码 | 加密存储 |
| API Secret | 凭证管理加密 |

### 传输加密

| 场景 | 加密方式 |
|------|---------|
| 数据同步 | SSL/TLS |
| API 调用 | HTTPS |
| 数据库连接 | SSL 可选 |

## 审计日志

### 审计内容

| 操作类型 | 记录内容 |
|---------|---------|
| 登录登出 | 用户、时间、IP |
| 数据查询 | SQL、结果行数 |
| 任务操作 | 创建/修改/删除 |
| 权限变更 | 角色分配 |

### 查看审计日志

**路径**：安全中心 → 审计日志

筛选条件：
- 时间范围
- 操作类型
- 操作用户
- 操作对象

## 数据分级

### 分级标准

| 级别 | 说明 | 示例 |
|------|------|------|
| **L1 公开** | 可公开数据 | 商品名称 |
| **L2 内部** | 内部使用 | 订单量 |
| **L3 秘密** | 敏感数据 | 用户行为 |
| **L4 机密** | 高度敏感 | 身份证、银行卡 |

### 分级配置

1. 定义分级标准
2. 标记表/字段级别
3. 配置访问策略
4. 绑定脱敏规则

## 最佳实践

### 生产环境隔离

```
开发环境（dev）     生产环境（prod）
    │                   │
    │  发布审批流程  →   │
    │                   │
开发人员可访问      仅运维可访问
```

### 敏感数据保护

```
1. 识别敏感字段
2. 配置脱敏规则
3. 限制查询权限
4. 启用审计日志
5. 定期审查权限
```
